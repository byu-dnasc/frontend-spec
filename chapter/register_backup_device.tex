% Chapter: Register Backup Device Pop-up

\section{Overview}

This chapter will describe the contents of the register backup device pop-up 
window. The window contents should alternate between three states. A small confirmation 
pop-up box is also described. The purpose of the register backup device pop-up is to 
collect information from the user about a new backup device and register it. It is opened 
by clicking the register backup device button in the create backup section of the backups 
pop-up window. Once registered, the backup device can be selected by the user as the 
destination for a backup transfer.

\subsection{Redirection to Globus web app}

The register backup device pop-up window should redirect the user to the 
\linkglobusbrowseendpoint{browse endpoint ``helper page''} provided by Globus for 
selecting transfer endpoints. This page enables the user to select a Globus collection
and a path on the collection representing a device they wish to register as a backup device.
A text field is also available for the user to enter a name for the backup device.
Once the user clicks ``Submit'' in the helper page, they are redirected back to a callback 
URL. A response from the helper page will contain data about the backup device selected by 
the user.

\section{Content}

The content of the register backup device pop-up window should have three states: the initial state,
the incomplete selection state, and the confirm registration state. In addition to the state-specific
content described in the sections below, all three states should include the same button labeled 
``Redirect to Globus Web App'' to redirect the user to the helper page.

\subsubsection{State transitions}

Transitions between states occur conditionally after the user returns from being redirected 
to the Globus web app. The transitions are as follows:

\begin{itemize}
    \item The initial state is the initial state of the register backup device pop-up window. It
    is not re-entered once it is left.
    \item The incomplete selection state is (re)entered when the user returns from the Globus web app
    without having selected all necessary data for registering a backup device.
    \item The confirm registration state is (re)entered when the user returns from the Globus web app
    having selected all necessary data for registering a backup device.
\end{itemize}

\subsection{Initial state}

The purpose of the initial state of the register backup device pop-up window is instruct the user
how to register a backup device and present the redirect button. It should display the same 
string used to brief the user which is included in the description of the confirm redirect pop-up (section 
\ref{sec:confirm-redirect-popup}).

\subsection{Incomplete selection state}

The incomplete selection state of the register backup device pop-up window should inform 
the user that they have not selected all necessary data for registering a backup device.
The following string:

\vspace{3mm}
``Backup device not identified: selection not complete''
\vspace{3mm}

\noindent should be displayed prominently.
Another message should be displayed informing the user of which data is missing. For example, 
if the backup device name and path are missing, the confirm registration section should contain the 
following string:

\vspace{3mm}
``The following information was not collected: backup device name, device path. Please try 
again by clicking the `Redirect to Globus Web App' button''
\vspace{3mm}

\noindent The redirect button is available to allow the user to try again.

\subsection{Confirm registration state}

The content of the confirm registration state of the register backup device pop-up window 
allows the user to confirm the information collected from the Globus web app and register
the backup device if the information is correct. The redirect button is still available
in case the user wishes to change the information. 

The confirm registration section should display the data collected from the Globus web app 
in a read-only format, as follows:

\begin{itemize}\itemsep1pt
    \item ``Globus Collection Name: \texttt{globus\_collection\_name}''
    \item ``Device Path: \texttt{device\_path}''
    \item ``Backup Device Name: \texttt{backup\_device\_name}''
\end{itemize}

\noindent At the very bottom, the confirm registration section should also include a button 
labeled ``Register Device''.

\section{Confirm redirect pop-up\label{sec:confirm-redirect-popup}}

A small pop-up box should appear before the redirect to inform the user of the redirect 
and allow the user to cancel or proceed. If the user chooses to proceed, the box will change
its contents to the following message to brief the user on the purpose of the redirect:

\vspace{3mm}
``Follow redirection to the Globus web app to select a new backup device. Select a single
folder representing a device, provide a name for the device then click `Submit' to return 
to this page.''
\vspace{3mm}