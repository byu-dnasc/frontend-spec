% chapter: Movies page

\section{Overview}

This chapter will describe the movies page, a new page which will be added to the
DNASC website. The movies page will allow users to browse information about sequencing datasets 
(called ``movies'') presented as rows in a table. In addition to displaying data, some of the 
cells in these rows will serve as buttons to open pop-up windows. Each pop-up will present 
the user with opportunities to browse more information and/or perform an action on the 
individual movie it concerns. The pop-up windows mentioned in this chapter will be described 
in more detail in subsequent chapters. 

\subsubsection{Movies page accessibility}

The movies page should be accessible from the toolbar of \texttt{lsdnasc.byu.edu}. It should
only be accessible to users with the ``Technician''or ``System Administrator'' role. This goes 
for the movies page as well as all of its associated pop-up windows.

\section{Content}

The movies page should contain a table and filter buttons to toggle special filters described 
in this chapter.

\subsection{Movies Table}

The movies table should allow the user to browse all movies that have been generated by the 
DNASC and open pop-up windows to perform actions with respect to individual movies. Each row
represents a single movie. Rows of movie data should be sorted by run date.
The names of the columns of the movies table are listed in figure \ref{figure:moviestable}.

\subsubsection{Clickable text}

The text in the cells of certain columns (indicated by figure \ref{figure:moviestable}) should
serve as a button to open a pop-up window. For example, by clicking the text in the ID column 
of a given row, the movie details pop-up window should open, displaying details of the movie 
which said row represents (The movie details pop-up window will be described in more detail 
in chapter \ref{chapter:moviedetails}). Clickable text should be colored blue.

\subsubsection{Offline applicablility}

The shares and backup columns are not applicable to movies which are no longer online (i.e. not
available in the DNASC Globus collection). For movies where this is the case, these columns should
not be clickable.

\subsection{Table Filters}

In addition to the generic filtering and search functionality provided with other tables on the
current DNASC webpages, the following filters should be implemented to assist with the essential 
DNASC tasks of sharing and backing up movie files:

\subsubsection{Awaiting Backup}

A filter should be provided to show only movies that have not been backed up.
Such movies are identifiable by the fact that the value of \texttt{backup\_device} is the empty string. 

\subsubsection{Awaiting Sharing}

A filter should be provided to show only movies to which no DNASC user has access. Such movies 
fulfill one these two conditions:
\begin{itemize}\itemsep1pt
    \item The value of \texttt{user\_name} is the empty string, OR:
    \item There is no access rule associated with the movie and the role of the user associated 
    with the access rule is ``External''.
\end{itemize}

\noindent Additionally, the filter should only show movies which are online.

\section{Table text}

The movies table should have a column for each of the properties shown in figure 
\ref{figure:moviestable}. These properties belong to the \texttt{movie} data model (see appendix 
\ref{appendix:models} for more details on the \texttt{movie} data model). 

\begin{table}[h]
    \input{table/movie_table_details.tex}
    \caption{Movies table.}
    \label{figure:moviestable}
\end{table}

\subsubsection{Default text}

\noindent The following columns contain cells which display a default string when the 
value of the \texttt{movie} property they represent is the empty string or zero:
\begin{itemize}
    \item The text in a cell in the submitted by column should be ``Assign User''
    when the value of \texttt{user\_name} is the empty string.
    \item The text in a cell in the sharing column should be ``Share Movie'' when the
    value of \texttt{is\_online} is \texttt{true} and the value of \texttt{num\_shares} is zero.
    \item The text in a cell in the backup column should be ``Create Backup'' when the
    value of \texttt{is\_online} is \texttt{true} and the value of \texttt{backup\_device} is the empty string.
\end{itemize}

\subsubsection{Boolean values}

Boolean values should be displayed as ``Yes'' or ``No''.

\subsubsection{Offline applicability}

The text in a cell in the shares column or the backup column should be ``n/a'' when the cell 
is part of a row representing a movie where the value of \texttt{is\_online} is \texttt{false}.